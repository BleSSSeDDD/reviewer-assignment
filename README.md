# reviewer-assignment
Backend service for automatic PR reviewer assignment.


TODO:
Из-за того, что с самого начала я посчитал, что пользователь может находиться в нескольких командах, возникли архитектурные проблемы. 
Если пользователь может быть в нескольких командах одновременно, то логика выбора ревьюеров неоднозначна (не понятно из какой команды их выбирать).
Сейчас ревьюер выбирается из первой команды, в которую был добавлен пользователь, но в бд есть таблица со связями пользователей и команд, где один пользователь может находиться в нескольких командах.

Проверка существования команды осуществляется по наличию участников, а не по записи в таблице teams. Пустая команда считается несуществующей, что ошибочно:

if len(storageMembers) == 0 {
		return Response(404, ErrorResponse{
			Error: ErrorResponseError{
				Code:    "NOT_FOUND",
				Message: "team not found",
			},
		}), nil
	}

Ограничение на максимум 2 ревьюера реализовано только на уровне кода, в БД его нет

Все эти проблемы решаются переходом на новую схему БД, где команды это не отдельная таблица, а поле в таблице users.

Так же существует проблема с тем, что в спецификации не указано, когда возвращать 500 ошибкии и в каких формулировках. Сейчас некоторые ошибки бд возвращают 500 код,
потому что из спецификации не совсем понятно, какие конкретно ошибки возвращать, например, когда пользователь уже есть в команде и его добавляют повторно.

Так как время на выполнение задания ограничено, а переписать надо много кода, возможно, эти проблемы останутся в финальной версии
